<html>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MBTI만들기</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="css/styles.css" />
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="container-fluid">
<<<<<<< HEAD
        <a class="navbar-brand" href="#">MBTI만들기</a>
=======
        <a class="navbar-brand nav-logo" href="#">MBTI만들기</a>
>>>>>>> dev
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item">
<<<<<<< HEAD
              <a class="nav-link active" aria-current="page" href="#"
=======
              <a class="nav-link active nav-make" aria-current="page" href="#"
>>>>>>> dev
                >MBTI만들기</a
              >
            </li>
            <li class="nav-item">
<<<<<<< HEAD
              <a class="nav-link active" href="#">사용가이드</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="#">회원가입</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active">내화면</a>
=======
              <a class="nav-link active nav-guide" href="#">사용가이드</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active nav-join" href="#">회원가입</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active nav-logout" href="#">로그아웃</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active nav-mypage" href="#">내화면</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active nav-contact" href="#">문의하기</a>
>>>>>>> dev
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <article class="making">
      <div class="making__container border border-3 border-warning mt-3">
        <div class="making__head">
          <!-- 회원가입 -->
          <div class="making__title p24 mt-3">회원가입&로그인</div>
        </div>
        <div class="join-group mt-3">
          <div class="input-group mb-3">
            <span class="input-group-text" id="inputGroup-sizing-default"
              >이름</span
            >
            <input
              id="name-new"
              type="text"
              class="form-control"
              aria-label="Sizing example input"
              aria-describedby="inputGroup-sizing-default"
              placeholder="사용할 이름을 적어주세요"
            />
          </div>
          <div class="input-group mb-3">
            <span class="input-group-text" id="inputGroup-sizing-default"
              >이메일 주소</span
            >
            <input
              id="email-new"
              type="email"
              class="form-control"
              aria-label="Sizing example input"
              aria-describedby="inputGroup-sizing-default"
              placeholder="이메일주소를 적어주세요"
            />
          </div>
          <div class="input-group mb-3">
            <span class="input-group-text" id="inputGroup-sizing-default"
              >비밀번호입력</span
            >
            <input
              id="password-new"
              type="password"
              class="form-control"
              aria-label="Sizing example input"
              aria-describedby="inputGroup-sizing-default"
              placeholder="비밀번호는 6자리 이상으로 입력하세요"
            />
          </div>
          <div class="input-group mb-3">
            <span class="input-group-text" id="inputGroup-sizing-default"
              >비밀번호확인</span
            >
            <input
              type="password"
              class="form-control"
              aria-label="Sizing example input"
              aria-describedby="inputGroup-sizing-default"
              placeholder="비밀번호를 확인합니다"
            />
          </div>
          <button
            id="register"
            type="button"
            class="join-btn btn btn-outline-primary"
          >
            회원가입 하기
          </button>
        </div>
<<<<<<< HEAD
        <p class="text-end p14 mt-3">회원이라면? 로그인하러가기</p>
=======
        <p class="login-show text-end p14 mt-3 mb-3">
          회원이라면? 로그인하러가기
        </p>

>>>>>>> dev
        <!-- 로그인 -->
        <div class="login-group mt-3">
          <div class="input-group mb-3">
            <span class="input-group-text" id="inputGroup-sizing-default"
              >이메일 주소</span
            >
            <input
              id="email-input"
              type="email"
              class="form-control"
              aria-label="Sizing example input"
              aria-describedby="inputGroup-sizing-default"
              placeholder="이메일주소를 적어주세요"
            />
          </div>
          <div class="input-group mb-3">
            <span class="input-group-text" id="inputGroup-sizing-default"
              >비밀번호입력</span
            >
            <input
              id="password-input"
              type="password"
              class="form-control"
              aria-label="Sizing example input"
              aria-describedby="inputGroup-sizing-default"
              placeholder="비밀번호는 8자리 이상으로 입력하세요"
            />
          </div>

          <button
            id="login"
            type="button"
            class="join-btn btn btn-outline-primary"
          >
            로그인 하기
          </button>
<<<<<<< HEAD
          <button
            id="logout"
            type="button"
            class="join-btn btn btn-outline-primary"
          >
            로그아웃 하기
          </button>
        </div>
=======
        </div>
        <p class="join-show text-end p14 mt-3 mb-3">
          아직 회원이 아니라면? 회원가입부터 하자
        </p>
>>>>>>> dev
      </div>
    </article>
    <!-- 로컬스토리지에서 이름 가져오기 확인용 -->
    <!-- <div id="username">이름</div> -->
    <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-storage.js"></script>

    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyAHIgcKsQBaCnvu2wx6akv1q0bNOtPfue8",
        authDomain: "mbtimaker.firebaseapp.com",
        projectId: "mbtimaker",
        storageBucket: "mbtimaker.appspot.com",
        messagingSenderId: "627396109985",
        appId: "1:627396109985:web:d0812804a42c13aaf2b2e0",
        measurementId: "G-86TRH6DXXW",
      };

      // Initialize Firebase
      //   const app = initializeApp(firebaseConfig);
      firebase.initializeApp(firebaseConfig);
      //   const analytics = getAnalytics(app);
    </script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://code.jquery.com/jquery-3.6.0.min.js"
      integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
      crossorigin="anonymous"
    ></script>
    <script>
      const db = firebase.firestore();
      const storage = firebase.storage();

      // 유저정보 불러오기 로컬스토리지를 사용한다
      var 뺀거 = localStorage.getItem("user");
      // // JSON을 바로 뺄 수 없다
<<<<<<< HEAD
      $("#username").html(JSON.parse(뺀거).displayName);
=======
      // $("#username").html(JSON.parse(뺀거).displayName);
>>>>>>> dev
      firebase.auth().onAuthStateChanged((user) => {
        if (user) {
          console.log(user.uid);
          console.log(user.displayName);
          localStorage.setItem("user", JSON.stringify(user));
        }
      });
      // 이메일 회원가입

      $("#register").click(function () {
        var 이메일 = $("#email-new").val();
        var 비밀번호 = $("#password-new").val();
        var 이름 = $("#name-new").val();
        firebase
          .auth()
          .createUserWithEmailAndPassword(이메일, 비밀번호)
          .then((result) => {
<<<<<<< HEAD
            console.log(result);
            console.log(result.user);
            result.user.updateProfile({ displayName: 이름 });
          });
      });

=======
            var 유저정보 = {
              이름: 이름,
              이메일: 이메일,
            };
            db.collection("회원정보").doc(result.user.uid).set(유저정보);
            console.log(result);
            console.log(result.user);
            result.user.updateProfile({ displayName: 이름 });
            alert("회원가입이 완료되었습니다");
            $(".join-group").hide();
            $(".login-group").show();
            $(".login-show").hide();
            $(".join-show").show();
          });
      });

      $(".login-group").hide();
      $(".join-show").hide();
      // 로그인화면으로 전환하기
      $(".login-show").click(function () {
        $(".join-group").hide();
        $(".login-group").show();
        $(".login-show").hide();
        $(".join-show").show();
      });
      // 회원가입으로 전환하기
      $(".join-show").click(function () {
        $(".join-group").show();
        $(".login-group").hide();
        $(".join-show").hide();
        $(".login-show").show();
      });

>>>>>>> dev
      //   이메일 로그인

      $("#login").click(function () {
        var 이메일2 = $("#email-input").val();
        var 비밀번호2 = $("#password-input").val();
        firebase
          .auth()
          .signInWithEmailAndPassword(이메일2, 비밀번호2)
          .then((result) => {
<<<<<<< HEAD
            console.log(result.user);
          });
      });

      //   로그아웃

      $("#logout").click(function () {
        firebase.auth().signOut();
        localStorage.removeItem("user");
      });
    </script>
=======
            alert("로그인에 성공했습니다");
            console.log(result.user);
          });
        alert("아이디와 비밀번호를 확인해주세요");
      });
    </script>
    <!-- nav js 파일 연결하기 -->
    <script class="nav-js" src="../js/nav.js"></script>
>>>>>>> dev
  </body>
</html>
